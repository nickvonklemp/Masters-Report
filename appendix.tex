%*****************************************************
%	APPENDIX
%*****************************************************
\appendix
%-----------------------------------------------------
\chapter{Standard Quadrotor Dynamics}
\label{app:stddynamics}
%-----------------------------------------------------
Following 6-DOF derivations in Section:\ref{subsec:dynamics.rigidbody.lagrange}, the common reductions typically applied those equations for a generic "+" configuration quadrotor are now presented. Reiterating those four differential equations, Eq:\ref{eq:states}, which describe a rigid body's motion (using rotation matrices and not quaternions):
\begin{subequations}
\begin{equation}
\dot{\vec{\mathcal{E}}}=\mathbb{R}_b^I(-\eta)\vec{\nu}~~~~\in\mathcal{F}^I
\end{equation}
\vspace{-10pt}
\begin{equation}
\dot{\vec{v}}=\frac{1}{m}\bigg[-\vec{\omega}_b\times m\vec{v}+m\mathbb{R}_I^b(-\eta)\vec{G}_I+\vec{F}_{net}\bigg]~~~~\in\mathcal{F}^b
\end{equation}
\vspace{-10pt}
\begin{equation}
\dot{\vec{\eta}}=\Psi(\eta)\vec{\omega}_b~~~~\in\mathcal{F}^{v2},\mathcal{F}^{v1},\mathcal{F}^I
\end{equation}
\vspace{-10pt}
\begin{equation}
\dot{\vec{\omega}}_b=\mathbb{I}_b^{-1}\bigg[-\vec{\omega}_b\times\mathbb{I}_b\vec{\omega}_b+\vec{\tau}_{net}\bigg]~~~~\in\mathcal{F}^b
\end{equation}
\end{subequations}
The net heave thrust produced by rotors $i=[1:4]$ is given by:
\begin{subequations}
\begin{equation}
\vec{T}=\sum_{i=1}^4\vec{F}_i 
\end{equation}
The simplified relationship between the thrust force $\vec{F}_i$ and the propellers rotational speed $\Omega_i$ is approximately quadratic:
\begin{equation}
\vec{F}_i=k_1\Omega_i^2
\end{equation}
\end{subequations}
Similarly the aerodynamic torque opposing each rotating propeller is:
\begin{equation}
\tau_{aero}=k_2\Omega_i^2
\end{equation}
The control pitch and  roll torques are generated by opposing differential lift forces and finally the yaw torque is a net response to the rotational aerodynamic propeller torques. The control torque inputs are then defined as:
\begin{subequations}
\begin{equation}
\tau_{\phi}=\vec{L}_{arm}\big(\vec{F}_1-\vec{F}_3\big)
\end{equation}
\vspace{-5pt}
\begin{equation}
\tau_{\theta}=\vec{L}_{arm}\big(\vec{F}_2-\vec{F}_4\big)
\end{equation}
\vspace{-10pt}
\begin{equation}
\tau_{\psi}=\sum_{i=1}^4(-1)^{i}k_2\Omega_i
\end{equation}
\end{subequations}
Simplifying Eq:\ref{.} to component form:
\begin{equation}
\begin{pmatrix}
\dot{u}\\
\dot{v}\\
\dot{w}
\end{pmatrix}
=
\begin{pmatrix}
rv-qw\\
pw-ru\\
qu-pv
\end{pmatrix}
+
\begin{pmatrix}
-g sin(\theta)\\
g cos(\theta)sin(\phi)\\
g cos(\theta)cos(\phi)
\end{pmatrix}
+
\frac{1}{m}\begin{pmatrix}
0\\
0\\
F
\end{pmatrix}
~~~~\in\mathcal{F}^b
\end{equation}
\par
Considering the size of the average angular velocity $\omega_b$, the gyroscopic effects on the body (namely the cross product terms) are negligiable. Assuming too that the body has a (\emph{roughly}) diagonal inertial matrix:
\begin{equation}
\begin{pmatrix}
\frac{\mathbb{I}_y-\mathbb{I}_z}{\mathbb{I}_x}qr\\
\frac{\mathbb{I}_z-\mathbb{I}_x}{\mathbb{I}_y}pr\\
\frac{\mathbb{I}_x-\mathbb{I}_y}{\mathbb{I}_z}pq
\end{pmatrix}
\approx
\vec{0}
\end{equation}
As a result, Eq:\ref{.} then simplifies to:
\begin{equation}
\begin{pmatrix}
\dot{p}\\
\dot{q}\\
\dot{r}
\end{pmatrix}
=
\begin{pmatrix}
\frac{1}{\mathbb{I}_x}\tau_\phi\\
\frac{1}{\mathbb{I}_y}\tau_\theta\\
\frac{1}{\mathbb{I}_z}\tau_\psi
\end{pmatrix}
\end{equation}
Similarly, around the origin and hovering conditions, $\Psi(\eta)\approx\vec{1}$ for $\eta\approx\vec{0}$ then $\dot{\eta}\approx\omega_b$. Or in component form:
\begin{equation}
\begin{pmatrix}
\dot{p}\\
\dot{q}\\
\dot{r}
\end{pmatrix}
\approx
\begin{pmatrix}
\ddot{\phi}\\
\ddot{\theta}\\
\ddot{\psi}
\end{pmatrix}
\end{equation}
Because $\omega_b$ is small, the Coriolis cross-product term in Eq:\ref{.} is depreciated.
\begin{equation}
\begin{pmatrix}
rv-qw\\
pw-ru\\
qu-pv
\end{pmatrix}
\approx\vec{0}
\end{equation}
As such, the differential equations Eq:\ref{.} are then simplied to the following six SISO controllable plants:
\begin{subequations}
\begin{equation}
\ddot{x}=(-cos(\phi)sin(\theta)cos(\psi)-sin(\phi)sin(\psi)\frac{1}{m}F
\end{equation}
\begin{equation}
\ddot{y}=(-cos(\phi)sin(\theta)sin(\psi)+sin(\phi)cos(\psi))\frac{1}{m}F
\end{equation}
\begin{equation}
\ddot{z}=g-(cos(\phi)cos(\theta)\frac{1}{m}F
\end{equation}
\begin{equation}
\ddot{\phi}=\frac{1}{\mathbb{I}_x}\tau_\phi
\end{equation}
\begin{equation}
\ddot{\theta}=\frac{1}{\mathbb{I}_y}\tau_\theta
\end{equation}
\begin{equation}
\ddot{\psi}=\frac{1}{\mathbb{I}_z}\tau_\psi
\end{equation}
\end{subequations} %-----------------------------------------------------
\chapter{Design Bill of Materials}
\label{app:bom}
%-----------------------------------------------------
\section{Parts List}
%-----------------------------------------------------
\begin{table}[htbp]
\centering
\begin{tabularx}{\textwidth}{|X|l|l|}
\hline
\multicolumn{1}{|c|}{Part Name} & No. Used & Unit Weight[g]\\ \hline
\multicolumn{3}{|c|}{Electronics}\\ \hline
SPRacing F3 Deluxe Flight Controller & 1 & 8\\ \hline
OrangeRx 615X 2.4 GHz 6CH Receiver & 1 & 9.8\\ \hline
Signal Converter SBUS-PPM-PWM & 1 & 5.0\\ \hline 
STLink-V2 Debugger & 1 & 3\\ \hline
RotorStar Super Mini S-BEC 10A & 1 & 30\\ \hline
128x96" OLED Display & 1 & 7 \\ \hline
XBee-Pro S1 & 2 & 4 \\ \hline
HobbyWing XRotor 20A Opto ESC & 4 & 15\\ \hline
OrangeRX RPM Sensor & 4 & 2\\ \hline
HobbyKing Multi-Rotor Power Distribution Board & 1 & 49\\ \hline
\multicolumn{3}{|c|}{Motors}\\ \hline
Corona DS-339MG & 8 & 32\\ \hline
Cobra 2208 2000KV Brushlesss DC & 4 & 44.2\\ \hline
\multicolumn{3}{|c|}{Frame Components}\\ \hline
APM Flight Controller Damping Platform & 1 & 7\\ \hline
HobbyKing SK450 Replacement Arm (2 pcs) & 2 & 51\\ \hline
SK450 Extended Landing Skid & 1 & 23.25\\ \hline
Alloy Servo Arm (FUTABA) & 8 & 4\\ \hline
10X18X6 Radial Ball Bearing & 8 & 5\\ \hline
80g Damping Ball & 32 & $\approx 0$\\ \hline
Plastic Retainers for Damping Balls & 32 & $\approx 0$\\ \hline
3/5mm Aluminum Prop Adapter & 4 & $\approx 1$\\ \hline
6x4.5 Gemfam 3-Blade Propeller & 4 & 6\\ \hline
M3 6mm Hex Nylon Spacer & 8 & $\approx 0$\\ \hline
M3 16mm Hex Nylon Spacer & 32 & $\approx 0$\\ \hline
M3 25mm Nylon Screw & 128 & $\approx 0.08$\\ \hline
M2.5x10mm Socket Head Cap Screw & 36 & $\approx 0.2$\\ \hline
M2.5x25mm Socket Head Cap Screw & 20 & $\approx 0.6$\\ \hline
M2.5 A-Lok Nut & 16 & $\approx 0$\\ \hline 
\end{tabularx}
\label{tab:partslist}
\caption{Parts List}
\end{table}
%-----------------------------------------------------
\newpage
%-----------------------------------------------------
\newgeometry{left=1cm,right=1cm,top=2cm,bottom=2cm}
\begin{figure}[hbtp]
\vspace{-20pt}
\centering
\includegraphics[width=0.98\textwidth]{pdfpages/working.pdf}
\captionof{table}{3D Printed Parts}
\end{figure}
\restoregeometry
%-----------------------------------------------------
\newpage
%-----------------------------------------------------
\newgeometry{left=1cm,right=1cm,top=2cm,bottom=1cm}
\begin{table}[htbp]
\label{tab:damping-assemblies.a}
\centering
\begin{tabularx}{\textwidth}{|X|X|}
\hline
\multicolumn{2}{|c|}{Bracket Assemblies 2}\\
\hline
\begin{minipage}{0.5\textwidth}
\vspace{6pt}
\centering
\includegraphics[width=0.7\textwidth]{figs/appendix/assembly-inner-bearing}
\captionof{figure}{Bearing Bracket Inner Ring Assembly}
Parts: A.1, A.2
\end{minipage}
&
\begin{minipage}{0.5\textwidth}
\vspace{6pt}
\centering
\includegraphics[width=0.7\textwidth]{figs/appendix/assembly-inner-servo}
\captionof{figure}{Servo Bracket Inner Ring Assembly}
Parts: B.1, B.2, M3 Servo Horn
\end{minipage}
\\
\hline
\begin{minipage}{0.5\textwidth}
\vspace{6pt}
\centering
\includegraphics[width=0.7\textwidth]{figs/appendix/assembly-middle-servo-bracket}
\captionof{figure}{Servo Bracket Middle Ring Assembly}
Parts: C.1, C.2, C.3, M3 Servo Horn
\end{minipage}
&
\begin{minipage}{0.5\textwidth}
\vspace{6pt}
\centering
\includegraphics[width=0.7\textwidth]{figs/appendix/assembly-middle-bearing-holder}
\captionof{figure}{Bearing Holder Middle Ring Assembly}
Parts: D.1, D.2, D.3, D.4, 18-10 Bearing
\end{minipage}
\\
\hline
\begin{minipage}{0.5\textwidth}
\vspace{6pt}
\centering
\includegraphics[width=0.7\textwidth]{figs/appendix/assembly-middle-servo-mount}
\captionof{figure}{Servo Mount Middle Ring Assembly}
Parts: E.1, E.2, Corona Servo \& Fasteners
\end{minipage}
&
\begin{minipage}{0.5\textwidth}
\vspace{6pt}
\centering
\includegraphics[width=0.7\textwidth]{figs/appendix/assembly-middle-bearing-bracket}
\captionof{figure}{Bearing Shaft Middle Ring Assembly}
Parts: F.1, F.2, F.3
\end{minipage}
\\
\hline
\end{tabularx}
\caption{Inner \& Middle Ring Assemblies}
\end{table}
\restoregeometry
%-----------------------------------------------------
\newpage
%-----------------------------------------------------
% Table 2
\newgeometry{left=1cm,right=1cm,top=2cm,bottom=0.5cm}
\begin{table}[htbp]
\label{tab:damping-assemblies.b}
\centering
\begin{tabularx}{\textwidth}{|X|X|}
\hline
\multicolumn{2}{|c|}{Bracket Assemblies 2}\\
\hline
\begin{minipage}{0.5\textwidth}
\vspace{6pt}
\centering
\includegraphics[width=0.7\textwidth]{figs/appendix/assembly-damping-bearing}
\captionof{figure}{Bearing Holder Damping Assembly}
Parts: G.1, G.2, G.3, G.4, 18-10 Bearing, 80g 
\\
Damping Balls, Bearing Holder Damping Bracket
\end{minipage}
&
\begin{minipage}{0.5\textwidth}
\vspace{6pt}
\centering
\includegraphics[width=0.7\textwidth]{figs/appendix/assembly-damping-servo}
\captionof{figure}{Servo Mount Damping Assembly}
Parts: H.1, H.2, Corona Servo \& Fasteners, 80g Damping Balls, Servo Mount Damping Bracket
\end{minipage}
\\
\hline
\end{tabularx}
\caption{Damping Assemblies}
\end{table}
\par
\begin{table}[htbp]
\label{tab:damping-backets}
\centering
\begin{tabularx}{\textwidth}{|X|X|}
\hline
\multicolumn{2}{|c|}{Laser Cut Brackets}\\
\hline
\begin{minipage}{0.5\textwidth}
\vspace{6pt}
\centering
\includegraphics[width=0.8\textwidth]{figs/appendix/damping-bracket-servo}
\captionof{figure}{Servo Mount Damping Bracket}
\end{minipage}
&
\begin{minipage}{0.5\textwidth}
\vspace{6pt}
\centering
\includegraphics[width=0.8\textwidth]{figs/appendix/damping-bracket-bearing}
\captionof{figure}{Bearing Holder Damping Bracket}
\end{minipage}
\\
\hline
\begin{minipage}{0.5\textwidth}
\vspace{12pt}
\centering
\includegraphics[width=0.9\textwidth]{figs/appendix/damping-arm-mount}
\captionof{figure}{Arm Mount Damping Bracket}
\end{minipage}
&
\begin{minipage}{0.5\textwidth}
\vspace{6pt}
\centering
\includegraphics[width=0.6\textwidth]{figs/appendix/frame-assembly}
\captionof{figure}{Frame Brackets}
\end{minipage}
\\
\hline
\end{tabularx}
\caption{Laser Cut Damping Brackets}
\end{table}

\restoregeometry
%-----------------------------------------------------
\newpage
%-----------------------------------------------------
\newgeometry{left=1cm,right=1cm,top=2cm,bottom=1cm}
\vspace{-20pt}
\begin{figure}[hbtp]
\centering
\includegraphics[width=0.95\textwidth]{pdfpages/rings.pdf}
\captionof{table}{Laser Cut Parts}
\end{figure}
\restoregeometry
%-----------------------------------------------------
\newpage
%-----------------------------------------------------
\newgeometry{left=1cm,right=1cm,top=2cm,bottom=1cm}
\section{F3 Deluxe Schematic Diagram}
\label{app:deluxe-diagram}
{\centering
\fbox{
\begin{minipage}{0.9\textwidth}
\centering
\includegraphics[width=\textwidth]{pdfpages/deluxe-schematic.pdf}
\end{minipage}
}
\captionof{figure}{F3 Deluxe Flight Controller Hardware Schematic}
}
\restoregeometry
%-----------------------------------------------------
\newpage
%-----------------------------------------------------
\chapter{System ID Test Data}
\label{app:systemdat}
%-----------------------------------------------------
\section{Servo Data}
%-----------------------------------------------------
\newpage
%-----------------------------------------------------
\newgeometry{left=1cm,right=1cm,top=2cm,bottom=1cm}
\section{Cobra CM2208-200KV Thrust Data}
\label{app:cobra-test}
\centering
\fbox{
\begin{minipage}{0.9\textwidth}
\centering
\includegraphics[width=\textwidth]{pdfpages/cobra-test.pdf}
\end{minipage}
}
\captionof{figure}{Official Test Results for Cobra Motors}
\restoregeometry
%-----------------------------------------------------
\newpage
%-----------------------------------------------------
\chapter{Inertias}
\label{app:eq}
\begin{subequations}
\begin{equation} \label{eq:app.inertia}
\mathbb{I}_{inner}
\end{equation}
\vspace{-5pt}
\begin{equation}
\mathbb{I}_{middle}
\end{equation}
\begin{equation}
\mathbb{I}_{body}
\end{equation}
\end{subequations}
